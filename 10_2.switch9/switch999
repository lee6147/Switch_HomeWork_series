#include <iom128v.h>

// sw_A는 up 카운트, sw_B는 down 카운트
void delay_m(unsigned int m);

char number[10] = {0x82, 0x9F, 0xC4, 0x85, 0x99, 0xA1, 0xA0, 0x8F, 0x80, 0x89};
int count, up = 1, down = 0;

int main(void)
{
    DDRD = 0x7F; // PORTD 0~6핀을 출력으로 설정 (7-segment)
    DDRE = 0xCF; // PORTE 4, 5번 핀을 입력으로 설정 (0b11001111)

    while(1)
    {
        while(up){
            if(count == 10){
                count = 0;
            }
            PORTD = number[count++];
            delay_m(500);
        }
        while(down){
            if(count == -1){
                count = 9;
            }
            PORTD = number[count--];
            delay_m(500);
        }
    }
}

void delay_m(unsigned int m){
    unsigned int i, j;
    for(i=0; i < m; i++){
        // sw_A(PE4)가 눌렸을 때 (HIGH 신호)
        if((PINE & 0x10) == 0x10){
            up = 1;
            down = 0;
        }
        // sw_B(PE5)가 눌렸을 때 (HIGH 신호)
        if((PINE & 0x20) == 0x20){
            up = 0;
            down = 1;
        }
        for(j=0; j < 2100; j++){
            ;
        }
    }
}
